{% extends "base.html" %}

{% block content %}
    <h2>Conversation Tree</h2>

    <!-- Treant.js container -->

    <div class="row">
        <div class="col-10">
            <div id="tree-container"></div>
        </div>
    </div>

    <!-- Load required scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/treant-js/1.0/Treant.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- Treant.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/treant-js/1.0/Treant.css" />

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const treeConfig = {{ tree_data|safe }};  // JSON data from Django context
            new Treant(treeConfig);
        });
    </script>

    <style>
        /* Max width and text wrapping for nodes */
        .turn {
            width: 20em;
            text-align: left;
            margin-left: 0; /* Remove excessive left margin */
            white-space: normal;
            overflow-wrap: break-word;
            word-wrap: break-word;
            padding: 5px;
            font-size: 12px;
        }

        .node {
            display: flex;
            align-items: left;
            justify-content: left;
       
            font-family: 'Palatino', 'Hoefler Text', 'Palatino Linotype', 'Book Antiqua', 'Palatino LT STD', 'Georgia', 'serif';
            font-size:11pt;

        }

        #tree-container a { text-decoration: none; text-align: left;}

        .node-title {
            font-family: system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans","Liberation Sans",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
            
            font-weight: bold;
            font-size:10pt;
        }


    </style>
{% endblock %}
